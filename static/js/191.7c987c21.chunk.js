"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[191],{8152:function(e,n,t){var r={movies:[],movie:null,cast:null,status:t(7199).Z.idle,reviews:[]};n.Z=r},7199:function(e,n){n.Z={idle:"idle",pending:"pending",resolved:"resolved",rejected:"rejected"}},6951:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var r,i,c,o,a,s,u,l,h,f=t(5861),d=t(9439),p=t(4687),v=t.n(p),g=t(7689),m=t(2791),Z=t(9482),x=t(168),j=t(1087),w=t(3081),k=(0,w.Z)(j.rU)(r||(r=(0,x.Z)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: ","px;\n  border: 1px solid grey;\n  border-radius: 10px;\n  padding: ","px;\n  min-width: 150px;\n  margin-bottom: ","px;\n  text-decoration: none;\n  color: inherit;\n"])),(function(e){return 3*e.theme.spacing}),(function(e){return 3*e.theme.spacing}),(function(e){return 4*e.theme.spacing})),b=t(184),y=function(e){var n=e.link;return(0,b.jsxs)(k,{to:n,children:[(0,b.jsx)(Z.TPM,{})," Go back"]})},_=t(9308),S=t(146),U=t.p+"static/media/default-movie-poster.bc9db0733980c6162243.jpg",M=function(e){var n=e.poster_path,t=e.title,r=e.release_date,i=e.vote_average,c=e.overview,o=e.genres;return{posterPath:n?(0,S.Z)(n):U,fullYear:new Date(r).getFullYear(),userScore:Math.round(10*i),movieGenres:o.map((function(e){return e.name})).join(", "),title:t,overview:c}},E=w.Z.img(i||(i=(0,x.Z)(["\n  width: 300px;\n"]))),P=w.Z.div(c||(c=(0,x.Z)(["\n  display: flex;\n  gap: ","px;\n"])),(function(e){return 8*e.theme.spacing})),T=w.Z.h2(o||(o=(0,x.Z)(["\n  margin-bottom: ","px;\n"])),(function(e){return 4*e.theme.spacing})),A=w.Z.p(a||(a=(0,x.Z)([""]))),C=w.Z.h3(s||(s=(0,x.Z)(["\n  margin-top: ","px;\n  margin-bottom: ","px;\n"])),(function(e){return 4*e.theme.spacing}),(function(e){return 4*e.theme.spacing})),G=w.Z.div(u||(u=(0,x.Z)(["\n  margin-top: ","px;\n"])),(function(e){return 4*e.theme.spacing})),O=w.Z.ul(l||(l=(0,x.Z)(["\n  margin-bottom: ","px;\n"])),(function(e){return 4*e.theme.spacing})),R=w.Z.li(h||(h=(0,x.Z)(["\n  margin-top: ","px;\n"])),(function(e){return 4*e.theme.spacing})),Y=function(e){var n=e.movie,t=M(n),r=t.posterPath,i=t.fullYear,c=t.userScore,o=t.movieGenres,a=t.title,s=t.overview;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(P,{children:[(0,b.jsx)(E,{src:r,alt:""}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(T,{children:["".concat(a," (").concat(i,")")," "]}),(0,b.jsxs)(A,{children:["User Score: ",c,"%"]}),(0,b.jsx)(C,{children:"Overview"}),(0,b.jsx)(A,{children:s}),(0,b.jsx)(C,{children:"Genres"}),(0,b.jsx)(A,{children:o})]})]}),(0,b.jsxs)(G,{children:[(0,b.jsx)(A,{children:"Additional information"}),(0,b.jsxs)(O,{children:[(0,b.jsx)(R,{children:(0,b.jsx)(j.rU,{to:"cast",children:"Cast"})}),(0,b.jsx)(R,{children:(0,b.jsx)(j.rU,{to:"reviews",children:"Reviews"})})]})]})]})},D=t(8152),F=t(4671),q=t(7199),B=t(1972),H=t(7972),J=function(){var e,n=(0,m.useState)((function(){return D.Z.movie})),t=(0,d.Z)(n,2),r=t[0],i=t[1],c=(0,m.useState)((function(){return D.Z.status})),o=(0,d.Z)(c,2),a=o[0],s=o[1],u=(0,g.UO)()[F.ah],l=(0,g.TH)(),h=(0,m.useRef)(null===(e=l.state)||void 0===e?void 0:e.from).current,p=h||F.$x;return(0,m.useEffect)((function(){function e(){return(e=(0,f.Z)(v().mark((function e(n){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(q.Z.pending),e.next=4,B.Z.fetchMovieDetails(n);case 4:t=e.sent,i(t),(0,H.Q)("Movie uploaded"),s(q.Z.resolved),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),(0,H.J)("HTTP request failed"),s(q.Z.rejected);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(n){e.apply(this,arguments)}(u)}),[u]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{link:p}),r&&(0,b.jsx)(Y,{movie:r}),a===q.Z.pending&&(0,b.jsx)(_.Z,{}),(0,b.jsx)(m.Suspense,{fallback:(0,b.jsx)(_.Z,{}),children:(0,b.jsx)(g.j3,{})})]})}},1972:function(e,n,t){var r=t(5671),i=t(3144),c=t(6274),o=t(9359),a=(0,o.Z)("API_KEY"),s=(0,o.Z)("BASE_URL"),u=new(function(){function e(){(0,r.Z)(this,e),Object.defineProperty(this,a,{writable:!0,value:"2f4676f5b742582c83b7dc4456b7601c"}),Object.defineProperty(this,s,{writable:!0,value:"https://api.themoviedb.org/3"})}return(0,i.Z)(e,[{key:"fetchTrendingMovies",value:function(){return fetch("".concat((0,c.Z)(this,s)[s],"/trending/all/day?language=en-US&api_key=").concat((0,c.Z)(this,a)[a])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMovieDetails",value:function(e){return fetch("".concat((0,c.Z)(this,s)[s],"/movie/").concat(e,"?language=en-US&api_key=").concat((0,c.Z)(this,a)[a])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMovieCast",value:function(e){return fetch("".concat((0,c.Z)(this,s)[s],"/movie/").concat(e,"/credits?language=en-US&api_key=").concat((0,c.Z)(this,a)[a])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMovieReviews",value:function(e){return fetch("".concat((0,c.Z)(this,s)[s],"/movie/").concat(e,"/reviews?language=en-US&page=1&api_key=").concat((0,c.Z)(this,a)[a])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMoviesByTitle",value:function(e){return fetch("".concat((0,c.Z)(this,s)[s],"/search/movie?query=").concat(e,"&include_adult=false&language=en-US&page=1&api_key=").concat((0,c.Z)(this,a)[a])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}}]),e}());n.Z=u},146:function(e,n){n.Z=function(e){return"https://image.tmdb.org/t/p/original".concat(e)}},7972:function(e,n,t){t.d(n,{J:function(){return i},Q:function(){return c}});var r=t(9085),i=(t(5462),function(e){r.Am.error(e)}),c=function(e){r.Am.success(e)}}}]);
//# sourceMappingURL=191.7c987c21.chunk.js.map