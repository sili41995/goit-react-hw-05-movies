"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[369],{8500:function(e,n,t){t.d(n,{Z:function(){return f}});t(2791);var i,r=t(7689),o=t(1087),c=t(168),u=t(3081).Z.ul(i||(i=(0,c.Z)(["\n  margin-top: ","px;\n"])),(function(e){return 4*e.theme.spacing})),a=t(4671),s=t(184),f=function(e){var n=e.movies,t=(0,r.TH)();return(0,s.jsx)(u,{children:n.map((function(e){var n=e.id,i=e.title,r=void 0===i?"Unknown movie":i;return(0,s.jsx)("li",{children:(0,s.jsx)(o.rU,{state:{from:t},to:"/".concat(a.ki,"/").concat(n),children:r})},n)}))})}},8152:function(e,n,t){var i={movies:[],movie:null,cast:null,status:t(7199).Z.idle,reviews:[]};n.Z=i},7199:function(e,n){n.Z={idle:"idle",pending:"pending",resolved:"resolved",rejected:"rejected"}},9369:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var i,r=t(5861),o=t(4942),c=t(9439),u=t(4687),a=t.n(u),s=t(1087),f=t(2791),l=t(1413),h=t(1134),v="movieTitle",d=t(168),Z=t(3081).Z.form(i||(i=(0,d.Z)(["\n  margin-bottom: ","px;\n"])),(function(e){return 4*e.theme.spacing})),p=t(184),m=function(e){var n=e.onSubmitForm,t=e.initialValue,i=void 0===t?"":t,r=(0,h.cI)(),o=r.register,c=r.handleSubmit;return(0,p.jsxs)(Z,{onSubmit:c(n),children:[(0,p.jsx)("input",(0,l.Z)({defaultValue:i},o(v))),(0,p.jsx)("button",{type:"submit",children:"Search"})]})},g=t(8500),k=t(9308),w=t(8152),j=t(7199),y=t(1972),b=t(7972),x=function(){var e=(0,f.useState)((function(){return w.Z.movies})),n=(0,c.Z)(e,2),t=n[0],i=n[1],u=(0,f.useState)((function(){return w.Z.status})),l=(0,c.Z)(u,2),h=l[0],d=l[1],Z=(0,s.lr)(),x=(0,c.Z)(Z,2),_=x[0],S=x[1],E=_.get(v);return(0,f.useEffect)((function(){function e(){return(e=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(j.Z.pending),e.next=4,y.Z.fetchMoviesByTitle(n);case 4:t=e.sent,(r=t.results).length&&(i(r),(0,b.Q)("Movies uploaded")),d(j.Z.resolved),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),(0,b.J)("HTTP request failed"),d(j.Z.rejected);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}E&&function(n){e.apply(this,arguments)}(E)}),[E]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m,{onSubmitForm:function(e){var n=e.movieTitle.trim();if(n){var t=n.replace(/ +/g," ");S((0,o.Z)({},v,t))}else(0,b.J)("Please, enter movie title")},initialValue:E}),!!t.length&&(0,p.jsx)(g.Z,{movies:t}),!t.length&&h===j.Z.resolved&&(0,p.jsx)("p",{children:"Movies not found"}),h===j.Z.pending&&(0,p.jsx)(k.Z,{})]})}},1972:function(e,n,t){var i=t(5671),r=t(3144),o=t(6274),c=t(9359),u=(0,c.Z)("API_KEY"),a=(0,c.Z)("BASE_URL"),s=new(function(){function e(){(0,i.Z)(this,e),Object.defineProperty(this,u,{writable:!0,value:"2f4676f5b742582c83b7dc4456b7601c"}),Object.defineProperty(this,a,{writable:!0,value:"https://api.themoviedb.org/3"})}return(0,r.Z)(e,[{key:"fetchTrendingMovies",value:function(){return fetch("".concat((0,o.Z)(this,a)[a],"/trending/all/day?language=en-US&api_key=").concat((0,o.Z)(this,u)[u])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMovieDetails",value:function(e){return fetch("".concat((0,o.Z)(this,a)[a],"/movie/").concat(e,"?language=en-US&api_key=").concat((0,o.Z)(this,u)[u])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMovieCast",value:function(e){return fetch("".concat((0,o.Z)(this,a)[a],"/movie/").concat(e,"/credits?language=en-US&api_key=").concat((0,o.Z)(this,u)[u])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMovieReviews",value:function(e){return fetch("".concat((0,o.Z)(this,a)[a],"/movie/").concat(e,"/reviews?language=en-US&page=1&api_key=").concat((0,o.Z)(this,u)[u])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}},{key:"fetchMoviesByTitle",value:function(e){return fetch("".concat((0,o.Z)(this,a)[a],"/search/movie?query=").concat(e,"&include_adult=false&language=en-US&page=1&api_key=").concat((0,o.Z)(this,u)[u])).then((function(e){if(!e.ok)throw new Error;return e.json()}))}}]),e}());n.Z=s},7972:function(e,n,t){t.d(n,{J:function(){return r},Q:function(){return o}});var i=t(9085),r=(t(5462),function(e){i.Am.error(e)}),o=function(e){i.Am.success(e)}}}]);
//# sourceMappingURL=369.1e146d33.chunk.js.map